# Streamlit Secrets Configuration for TDB Allotment Dashboard
# Copy this file to secrets.toml and fill in your credentials
# DO NOT commit secrets.toml to version control!

# ==============================
# Option A (Recommended): Supabase
# ==============================
# Create a Supabase project, then create the table described in README.
# Add these secrets in Streamlit Cloud:
supabase_url = "https://YOUR_PROJECT_REF.supabase.co"
supabase_key = "YOUR_SUPABASE_ANON_KEY"

# Optional (recommended for server-side apps like Streamlit):
# Use the Service Role key to avoid RLS blocking reads/writes.
# Keep this secret safe and NEVER expose it in client-side code.
# supabase_service_role_key = "YOUR_SUPABASE_SERVICE_ROLE_KEY"

# Optional overrides (you can keep defaults):
# supabase_table = "tdb_allotment_state"
# supabase_row_id = "main"

# Optional: Patient master list (used by the "Search patient" picker)
# Defaults are shown below; only set these if your table/columns differ.
# supabase_patients_table = "patients"
# supabase_patients_id_col = "id"
# supabase_patients_name_col = "name"

# Google Sheets Spreadsheet URL
# Create a new Google Sheet and copy the URL here
spreadsheet_url = "https://docs.google.com/spreadsheets/d/YOUR_SPREADSHEET_ID/edit"

# Google Cloud Platform Service Account Credentials
# 1. Go to Google Cloud Console (https://console.cloud.google.com)
# 2. Create a new project or select existing one
# 3. Enable "Google Sheets API" and "Google Drive API"
# 4. Create a Service Account (APIs & Services > Credentials > Create Credentials > Service Account)
# 5. Create a key for the service account (JSON format)
# 6. Share your Google Sheet with the service account email (with Editor access)
# 7. Copy the JSON content below

[gcp_service_account]
type = "service_account"
project_id = "your-project-id"
private_key_id = "your-private-key-id"
private_key = """-----BEGIN PRIVATE KEY-----
YOUR_PRIVATE_KEY_HERE
-----END PRIVATE KEY-----
"""
client_email = "your-service-account@your-project-id.iam.gserviceaccount.com"
client_id = "your-client-id"
auth_uri = "https://accounts.google.com/o/oauth2/auth"
token_uri = "https://oauth2.googleapis.com/token"
auth_provider_x509_cert_url = "https://www.googleapis.com/oauth2/v1/certs"
client_x509_cert_url = "https://www.googleapis.com/robot/v1/metadata/x509/your-service-account%40your-project-id.iam.gserviceaccount.com"

# Notes:
# - The `private_key` must be a valid PEM and MUST include the BEGIN/END lines exactly.
# - Do not add spaces at the start of key lines.
# - If you prefer single-line strings, you can use: private_key = "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"

# --- Alternative format (optional) ---
# If you prefer, you can store the *entire* service account JSON as a single secret string.
# In that case, remove the [gcp_service_account] section above and instead use:
#
# gcp_service_account_json = """{
#   "type": "service_account",
#   "project_id": "...",
#   "private_key_id": "...",
#   "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n",
#   "client_email": "...",
#   "client_id": "...",
#   "auth_uri": "https://accounts.google.com/o/oauth2/auth",
#   "token_uri": "https://oauth2.googleapis.com/token",
#   "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
#   "client_x509_cert_url": "..."
# }"""
